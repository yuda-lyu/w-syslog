/*!
 * formatter v1.0.5
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("fs"),require("path"),require("stream")):"function"==typeof define&&define.amd?define(["fs","path","stream"],r):(t="undefined"!=typeof globalThis?globalThis:t||self).formatter=r(t.fs,t.path,t.stream)}(this,function(t,r,e){"use strict";var n=Array.isArray,o="object"==typeof global&&global&&global.Object===Object&&global,i="object"==typeof self&&self&&self.Object===Object&&self,a=o||i||Function("return this")(),u=a.Symbol,c=Object.prototype,l=c.hasOwnProperty,s=c.toString,f=u?u.toStringTag:void 0;var p=Object.prototype.toString;var h=u?u.toStringTag:void 0;function y(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":h&&h in Object(t)?function(t){var r=l.call(t,f),e=t[f];try{t[f]=void 0;var n=!0}catch(t){}var o=s.call(t);return n&&(r?t[f]=e:delete t[f]),o}(t):function(t){return p.call(t)}(t)}function _(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&"[object Symbol]"==y(t)}var v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function g(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}var b,j=a["__core-js_shared__"],O=(b=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"";var S=Function.prototype.toString;var m=/^\[object .+?Constructor\]$/,w=Function.prototype,z=Object.prototype,$=w.toString,x=z.hasOwnProperty,P=RegExp("^"+$.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function A(t){if(!g(t)||(r=t,O&&O in r))return!1;var r,e=function(t){if(!g(t))return!1;var r=y(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}(t)?P:m;return e.test(function(t){if(null!=t){try{return S.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function F(t,r){var e=function(t,r){return null==t?void 0:t[r]}(t,r);return A(e)?e:void 0}var T=F(Object,"create");var C=Object.prototype.hasOwnProperty;var E=Object.prototype.hasOwnProperty;function k(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function q(t,r){return t===r||t!=t&&r!=r}function I(t,r){for(var e=t.length;e--;)if(q(t[e][0],r))return e;return-1}k.prototype.clear=function(){this.__data__=T?T(null):{},this.size=0},k.prototype.delete=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},k.prototype.get=function(t){var r=this.__data__;if(T){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return C.call(r,t)?r[t]:void 0},k.prototype.has=function(t){var r=this.__data__;return T?void 0!==r[t]:E.call(r,t)},k.prototype.set=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=T&&void 0===r?"__lodash_hash_undefined__":r,this};var B=Array.prototype.splice;function R(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}R.prototype.clear=function(){this.__data__=[],this.size=0},R.prototype.delete=function(t){var r=this.__data__,e=I(r,t);return!(e<0)&&(e==r.length-1?r.pop():B.call(r,e,1),--this.size,!0)},R.prototype.get=function(t){var r=this.__data__,e=I(r,t);return e<0?void 0:r[e][1]},R.prototype.has=function(t){return I(this.__data__,t)>-1},R.prototype.set=function(t,r){var e=this.__data__,n=I(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};var W=F(a,"Map");function D(t,r){var e,n,o=t.__data__;return("string"==(n=typeof(e=r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?o["string"==typeof r?"string":"hash"]:o.map}function G(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}G.prototype.clear=function(){this.size=0,this.__data__={hash:new k,map:new(W||R),string:new k}},G.prototype.delete=function(t){var r=D(this,t).delete(t);return this.size-=r?1:0,r},G.prototype.get=function(t){return D(this,t).get(t)},G.prototype.has=function(t){return D(this,t).has(t)},G.prototype.set=function(t,r){var e=D(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function L(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],i=e.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return e.cache=i.set(o,a)||i,a};return e.cache=new(L.Cache||G),e}L.Cache=G;var M,N,U,H=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,J=/\\(\\)?/g,K=(M=function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(H,function(t,e,n,o){r.push(n?o.replace(J,"$1"):e||t)}),r},N=L(M,function(t){return 500===U.size&&U.clear(),t}),U=N.cache,N),Q=K;var V=u?u.prototype:void 0,X=V?V.toString:void 0;function Y(t){if("string"==typeof t)return t;if(n(t))return function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o}(t,Y)+"";if(_(t))return X?X.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}function Z(t,r){return n(t)?t:function(t,r){if(n(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!_(t))||d.test(t)||!v.test(t)||null!=r&&t in Object(r)}(t,r)?[t]:Q(function(t){return null==t?"":Y(t)}(t))}function tt(t){if("string"==typeof t||_(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}function rt(t,r,e){var n=null==t?void 0:function(t,r){for(var e=0,n=(r=Z(r,t)).length;null!=t&&e<n;)t=t[tt(r[e++])];return e&&e==n?t:void 0}(t,r);return void 0===n?e:n}function et(t){return!(!function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)||""===t)}return async function(n){let o=rt(n,"fdLog");et(o)||(o="./_logs");let i=rt(n,"interval");"day"!==i&&"hr"!==i&&(i="day"),t.existsSync(o)||t.mkdirSync(o,{recursive:!0});let a=null,u="",c=()=>{let e=(()=>{let t=new Date;return"hr"===i?t.toISOString().slice(0,13).replace(/:/g,"-"):t.toISOString().slice(0,10)})();if(e!==u){u=e;let n=(t=>{let e=`${t}.log`;return r.join(o,e)})(e);a&&a.end(),a=t.createWriteStream(n,{flags:"a"})}};c();let l=new e.Writable({write(t,r,e){try{c();let r=Buffer.isBuffer(t)?t.toString("utf8"):String(t);a.write(r,e)}catch(t){e(t)}}});return l.on("error",t=>{console.error("formatter error",t)}),l}});
//# sourceMappingURL=formatter.umd.js.map
