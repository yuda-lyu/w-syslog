/*!
 * w-syslog v1.0.3
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("path"),require("url")):"function"==typeof define&&define.amd?define(["path","url"],t):(e="undefined"!=typeof globalThis?globalThis:e||self)["w-syslog"]=t(e.path,e.url)}(this,function(e,t){"use strict";var r="undefined"!=typeof document?document.currentScript:null,n=Array.isArray,i="object"==typeof global&&global&&global.Object===Object&&global,o="object"==typeof self&&self&&self.Object===Object&&self,s=i||o||Function("return this")(),l=s.Symbol,a=Object.prototype,c=a.hasOwnProperty,u=a.toString,f=l?l.toStringTag:void 0;var h=Object.prototype.toString;var p=l?l.toStringTag:void 0;function v(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":p&&p in Object(e)?function(e){var t=c.call(e,f),r=e[f];try{e[f]=void 0;var n=!0}catch(e){}var i=u.call(e);return n&&(t?e[f]=r:delete e[f]),i}(e):function(e){return h.call(e)}(e)}function d(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==v(e)}var b=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;function y(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var _,m=s["__core-js_shared__"],j=(_=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"";var O=Function.prototype.toString;var w=/^\[object .+?Constructor\]$/,z=Function.prototype,S=Object.prototype,E=z.toString,k=S.hasOwnProperty,L=RegExp("^"+E.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function T(e){if(!y(e)||(t=e,j&&j in t))return!1;var t,r=function(e){if(!y(e))return!1;var t=v(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(e)?L:w;return r.test(function(e){if(null!=e){try{return O.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function x(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return T(r)?r:void 0}var A=x(Object,"create");var P=Object.prototype.hasOwnProperty;var C=Object.prototype.hasOwnProperty;function R(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function F(e,t){return e===t||e!=e&&t!=t}function $(e,t){for(var r=e.length;r--;)if(F(e[r][0],t))return r;return-1}R.prototype.clear=function(){this.__data__=A?A(null):{},this.size=0},R.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},R.prototype.get=function(e){var t=this.__data__;if(A){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return P.call(t,e)?t[e]:void 0},R.prototype.has=function(e){var t=this.__data__;return A?void 0!==t[e]:C.call(t,e)},R.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=A&&void 0===t?"__lodash_hash_undefined__":t,this};var q=Array.prototype.splice;function M(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}M.prototype.clear=function(){this.__data__=[],this.size=0},M.prototype.delete=function(e){var t=this.__data__,r=$(t,e);return!(r<0)&&(r==t.length-1?t.pop():q.call(t,r,1),--this.size,!0)},M.prototype.get=function(e){var t=this.__data__,r=$(t,e);return r<0?void 0:t[r][1]},M.prototype.has=function(e){return $(this.__data__,e)>-1},M.prototype.set=function(e,t){var r=this.__data__,n=$(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var N=x(s,"Map");function U(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function D(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}D.prototype.clear=function(){this.size=0,this.__data__={hash:new R,map:new(N||M),string:new R}},D.prototype.delete=function(e){var t=U(this,e).delete(e);return this.size-=t?1:0,t},D.prototype.get=function(e){return U(this,e).get(e)},D.prototype.has=function(e){return U(this,e).has(e)},D.prototype.set=function(e,t){var r=U(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function I(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(I.Cache||D),r}I.Cache=D;var V,B,K,H=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G=/\\(\\)?/g,J=(V=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(H,function(e,r,n,i){t.push(n?i.replace(G,"$1"):r||e)}),t},B=I(V,function(e){return 500===K.size&&K.clear(),e}),K=B.cache,B),W=J;var Q=l?l.prototype:void 0,X=Q?Q.toString:void 0;function Y(e){if("string"==typeof e)return e;if(n(e))return function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}(e,Y)+"";if(d(e))return X?X.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Z(e,t){return n(e)?e:function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!d(e))||g.test(e)||!b.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:W(function(e){return null==e?"":Y(e)}(e))}function ee(e){if("string"==typeof e||d(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function te(e,t,r){var n=null==e?void 0:function(e,t){for(var r=0,n=(t=Z(t,e)).length;null!=e&&r<n;)e=e[ee(t[r++])];return r&&r==n?e:void 0}(e,t);return void 0===n?r:n}function re(e){return!(!function(e){return"[object String]"===Object.prototype.toString.call(e)}(e)||""===e)}function ne(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ie={exports:{}};function oe(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}const se=function(e,t,r){var n=r&&r.stringify||oe;if("object"==typeof e&&null!==e){var i=t.length+1;if(1===i)return e;var o=new Array(i);o[0]=n(e);for(var s=1;s<i;s++)o[s]=n(t[s]);return o.join(" ")}if("string"!=typeof e)return e;var l=t.length;if(0===l)return e;for(var a="",c=0,u=-1,f=e&&e.length||0,h=0;h<f;){if(37===e.charCodeAt(h)&&h+1<f){switch(u=u>-1?u:0,e.charCodeAt(h+1)){case 100:case 102:if(c>=l)break;if(null==t[c])break;u<h&&(a+=e.slice(u,h)),a+=Number(t[c]),u=h+2,h++;break;case 105:if(c>=l)break;if(null==t[c])break;u<h&&(a+=e.slice(u,h)),a+=Math.floor(Number(t[c])),u=h+2,h++;break;case 79:case 111:case 106:if(c>=l)break;if(void 0===t[c])break;u<h&&(a+=e.slice(u,h));var p=typeof t[c];if("string"===p){a+="'"+t[c]+"'",u=h+2,h++;break}if("function"===p){a+=t[c].name||"<anonymous>",u=h+2,h++;break}a+=n(t[c]),u=h+2,h++;break;case 115:if(c>=l)break;u<h&&(a+=e.slice(u,h)),a+=String(t[c]),u=h+2,h++;break;case 37:u<h&&(a+=e.slice(u,h)),a+="%",u=h+2,h++,c--}++c}++h}if(-1===u)return e;u<f&&(a+=e.slice(u));return a};ie.exports=ve;const le=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},ae={mapHttpRequest:me,mapHttpResponse:me,wrapRequestSerializer:je,wrapResponseSerializer:je,wrapErrorSerializer:je,req:me,res:me,err:ye,errWithCause:ye};function ce(e,t){return"silent"===e?1/0:t.levels.values[e]}const ue=Symbol("pino.logFuncs"),fe=Symbol("pino.hierarchy"),he={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function pe(e,t){const r={logger:t,parent:e[fe]};t[fe]=r}function ve(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||le;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},i=function(e,t){if(Array.isArray(e))return e.filter(function(e){return"!stdSerializers.err"!==e});return!0===e&&Object.keys(t)}(e.browser.serialize,n);let o=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);const s=Object.keys(e.customLevels||{}),l=["error","fatal","warn","info","debug","trace"].concat(s);"function"==typeof r&&l.forEach(function(e){r[e]=r}),(!1===e.enabled||e.browser.disabled)&&(e.level="silent");const a=e.level||"info",c=Object.create(r);c.log||(c.log=Oe),function(e,t,r){const n={};t.forEach(e=>{n[e]=r[e]?r[e]:le[e]||le[he[e]||"log"]||Oe}),e[ue]=n}(c,l,r),pe({},c),Object.defineProperty(c,"levelVal",{get:function(){return ce(this.level,this)}}),Object.defineProperty(c,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,de(this,u,c,"error"),de(this,u,c,"fatal"),de(this,u,c,"warn"),de(this,u,c,"info"),de(this,u,c,"debug"),de(this,u,c,"trace"),s.forEach(e=>{de(this,u,c,e)})}});const u={transmit:t,serialize:i,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:l,timestamp:_e(e),messageKey:e.messageKey||"msg",onChild:e.onChild||Oe};function f(r,o,s){if(!o)throw new Error("missing bindings for child Pino");s=s||{},i&&o.serializers&&(s.serializers=o.serializers);const l=s.serializers;if(i&&l){var a=Object.assign({},n,l),c=!0===e.browser.serialize?Object.keys(a):i;delete o.serializers,be([o],c,a,this._stdErrSerialize)}function u(e){this._childLevel=1+(0|e._childLevel),this.bindings=o,a&&(this.serializers=a,this._serialize=c),t&&(this._logEvent=ge([].concat(e._logEvent.bindings,o)))}u.prototype=this;const h=new u(this);return pe(this,h),h.child=function(...e){return f.call(this,r,...e)},h.level=s.level||this.level,r.onChild(h),h}return c.levels=function(e){const t=e.customLevels||{},r=Object.assign({},ve.levels.values,t),n=Object.assign({},ve.levels.labels,function(e){const t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}(t));return{values:r,labels:n}}(e),c.level=a,c.isLevelEnabled=function(e){return!!this.levels.values[e]&&this.levels.values[e]>=this.levels.values[this.level]},c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Oe,c.serializers=n,c._serialize=i,c._stdErrSerialize=o,c.child=function(...e){return f.call(this,u,...e)},t&&(c._logEvent=ge()),c}function de(e,t,r,n){if(Object.defineProperty(e,n,{value:ce(e.level,r)>ce(n,r)?Oe:r[ue][n],writable:!0,enumerable:!0,configurable:!0}),e[n]===Oe){if(!t.transmit)return;const i=ce(t.transmit.level||e.level,r);if(ce(n,r)<i)return}e[n]=function(e,t,r,n){return i=e[ue][n],function(){const o=t.timestamp(),s=new Array(arguments.length),l=Object.getPrototypeOf&&Object.getPrototypeOf(this)===le?le:this;for(var a=0;a<s.length;a++)s[a]=arguments[a];var c=!1;if(t.serialize&&(be(s,this._serialize,this.serializers,this._stdErrSerialize),c=!0),t.asObject||t.formatters?i.call(l,...function(e,t,r,n,i){const{level:o,log:s=e=>e}=i.formatters||{},l=r.slice();let a=l[0];const c={};let u=1+(0|e._childLevel);if(u<1&&(u=1),n&&(c.time=n),o){const r=o(t,e.levels.values[t]);Object.assign(c,r)}else c.level=e.levels.values[t];if(i.asObjectBindingsOnly){if(null!==a&&"object"==typeof a)for(;u--&&"object"==typeof l[0];)Object.assign(c,l.shift());return[s(c),...l]}if(null!==a&&"object"==typeof a){for(;u--&&"object"==typeof l[0];)Object.assign(c,l.shift());a=l.length?se(l.shift(),l):void 0}else"string"==typeof a&&(a=se(l.shift(),l));return void 0!==a&&(c[i.messageKey]=a),[s(c)]}(this,n,s,o,t)):i.apply(l,s),t.transmit){const i=t.transmit.level||e._level,l=ce(i,r),a=ce(n,r);if(a<l)return;!function(e,t,r,n=!1){const i=t.send,o=t.ts,s=t.methodLevel,l=t.methodValue,a=t.val,c=e._logEvent.bindings;n||be(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=r.filter(function(e){return-1===c.indexOf(e)}),e._logEvent.level.label=s,e._logEvent.level.value=l,i(s,e._logEvent,a),e._logEvent=ge(c)}(this,{ts:o,methodLevel:n,methodValue:a,transmitLevel:i,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:ce(e._level,r)},s,c)}};var i}(e,t,r,n);const i=function(e){const t=[];e.bindings&&t.push(e.bindings);let r=e[fe];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}(e);0!==i.length&&(e[n]=function(e,t){return function(){return t.apply(this,[...e,...arguments])}}(i,e[n]))}function be(e,t,r,n){for(const i in e)if(n&&e[i]instanceof Error)e[i]=ve.stdSerializers.err(e[i]);else if("object"==typeof e[i]&&!Array.isArray(e[i])&&t)for(const n in e[i])t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function ge(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function ye(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}function _e(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?we:ze}function me(){return{}}function je(e){return e}function Oe(){}function we(){return!1}function ze(){return Date.now()}ve.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},ve.stdSerializers=ae,ve.stdTimeFunctions=Object.assign({},{nullTime:we,epochTime:ze,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}}),ie.exports.default=ve,ie.exports.pino=ve;var Se=ne(ie.exports);let Ee=t.fileURLToPath("undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(Ee).href:"undefined"==typeof document?location.href:r&&"SCRIPT"===r.tagName.toUpperCase()&&r.src||new URL("w-syslog.umd.js",document.baseURI).href),ke=e.dirname(Ee);return async function(t={}){let r=te(t,"fdLog");re(r)||(r="./_logs");let n=te(t,"interval");"day"!==n&&"hr"!==n&&(n="day");let i=Se.transport({targets:[{level:"info",target:e.resolve(ke,"./formatter.mjs"),options:{interval:n,logDir:r}}]});return Se(i)}});
//# sourceMappingURL=w-syslog.umd.js.map
